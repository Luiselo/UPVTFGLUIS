function mostrarGrafico(e,n){const o=n.find(n=>n.id===e.group),t=n.filter(e=>e.numero<o.numero);console.log("data",e),console.log("curso",n),console.log("cursosAnteriores",t);const a=[];for(const n of e.sourceLinks)console.log("smantha hudson",n),a.push({id:n.target.id,asignatura:n.target,value:n.value});console.log("source",a);const c=[];for(const n of e.targetLinks)c.push({id:n.source.id,asignatura:n.source,value:n.value});const l=a.concat(c);e.sourceLinks.concat(e.targetLinks);console.log("relaciones",l);const r=new Set(l.map(e=>e.asignatura));console.log("nomresUnicos",r);const i=document.createElement("div");i.classList.add("modalGrafo"),i.innerHTML=`\n        \n        <form class="formulario nueva-tarea">\n            <h2>Relaciónes de ${e.nombre}</h2>\n           \n          \n          \n\n          <div class="Info">\n  <div class="info-campo">\n  <div class="columna">\n\n<h3>Asignatura relacionada:</h3>\n   <p id="textAsignatura"></p>\n\n   \n  <h3>Nivel de la relación:</h3>\n  <p id="nivelRelacion"></p>\n    <h3>Tags en común:</h3>\n  <p id="tagsComun"></p>\n</div>\n<div class="columna">\n\n  <textarea id="descripciónValue"></textarea>\n</div>\n  </div>\n \n</div>\n\n            <table class = "relaciones-tabla" border="1">\n                <tr>\n                    <th>Asignatura Relacionada</th>\n                    <th>Curso</th>\n                    <th>Nivel de Relevancia</th>\n                    <th>Url </th>\n                </tr>\n               \n            </table>\n    \n            <div class="campo"  style="display: none;>\n                <label>Descripción: </label>\n                <input \n                    type="text"\n                    name="descripcion"\n                    placeholder="${e.descripcion?"Edita la Tarea":"Descripción del proyecto"}"\n                    id="descripcion"\n                    value="${e.descripcion?e.descripcion:""}" />\n            </div>\n          \n           \n            <div class="opciones">\n                <button type="button" class="cerrar-modal">Cancelar</button>\n            </div>\n        </form>\n        \n           `,console.log("despues de conducir sin parar"),setTimeout(()=>{document.querySelector(".formulario").classList.add("animar")},0),document.querySelector(".dashboard").appendChild(i);const s=document.querySelector("table");r.forEach(e=>{console.log("1");const t=document.createElement("tr"),a=document.createElement("td"),c=document.createElement("td"),l=document.createElement("td"),r=document.createElement("td");console.log("name",e),r.innerHTML=`\n                       \n                            \n                            <div>\n                              ${e.nombre}\n                        \n                            </div>\n                            `,console.log(a),console.log(c),console.log(l),console.log("SOLO por saber",n);const i=n.find(n=>n.id===e.group);relevancia="",o.numero>i.numero?relevancia="predecesora":o.numero<i.numero?relevancia="sucesora":relevancia="relación",a.textContent=e.nombre,c.textContent=i.numero+" "+i.descripcion,l.textContent=relevancia,t.appendChild(a),t.appendChild(c),t.appendChild(l),t.appendChild(r),console.log(s),s.appendChild(t)}),s.addEventListener("click",(function(n){const o=n.target.closest("tr");if(o){console.log("Fila clicada:",o);const n=o.querySelectorAll("td")[0].textContent,t=getIdAsignaturaPorNombre(n,l);document.getElementById("textAsignatura").textContent=n,obtenerinfo(e.id,t)}}));document.getElementById("contenido");i.addEventListener("click",(function(e){if(e.preventDefault(),e.target.classList.contains("cerrar-modal")){console.log("se esta cerraando");document.querySelector(".formulario").classList.add("cerrar"),setTimeout(()=>{i.remove()},150)}}))}function expandirCelda(e){e.nextElementSibling.style.display="block",e.style.display="none"}function contraerCelda(e){const n=e.parentElement;n.style.display="none",n.previousElementSibling.style.display="inline"}function getIdAsignaturaPorNombre(e,n){let o=null;return n.forEach(n=>{n.asignatura.nombre===e&&(o=n.asignatura.id)}),o}async function obtenerinfo(e,n){new FormData;try{const o=`http://localhost/UpTask_MVC/public/index.php/api/inforelaciones?id1=${e}&id2=${n}`,t=await fetch(o),a=await t.json();let c="";console.log(a," MENUDO DIA XD"),c="0"===a.respuesta.relacion[0].color?"Relevancia Ligera":"1"===a.respuesta.relacion[0].color?"Relevancia Moderada":"2"===a.respuesta.relacion[0].color?"Relevancia Fuerte":"Relevancia Desconocida",console.log(a.respuesta.tags),document.getElementById("nivelRelacion").textContent=c,document.getElementById("descripciónValue").textContent=a.respuesta.relacion[0].descripcion,console.log(a)}catch(e){console.error("Error en la solicitud:",e)}}