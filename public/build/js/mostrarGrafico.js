<<<<<<< HEAD
function mostrarGrafico(e,n){const o=n.find(n=>n.id===e.group),t=n.filter(e=>e.numero<o.numero);console.log("data",e),console.log("curso",n),console.log("cursosAnteriores",t);const a=[];for(const n of e.sourceLinks)console.log("smantha hudson",n),a.push({id:n.target.id,asignatura:n.target,value:n.value});console.log("source",a);const c=[];for(const n of e.targetLinks)c.push({id:n.source.id,asignatura:n.source,value:n.value});const l=a.concat(c);e.sourceLinks.concat(e.targetLinks);console.log("relaciones",l);const r=new Set(l.map(e=>e.asignatura));console.log("nomresUnicos",r);const i=document.createElement("div");i.classList.add("modalGrafo"),i.innerHTML=`\n        \n        <form class="formulario nueva-tarea">\n            <h2>Relaciónes de ${e.nombre}</h2>\n           \n          \n          \n\n          <div class="Info">\n  <div class="info-campo">\n  <div class="columna">\n\n<h3>Asignatura relacionada:</h3>\n   <p id="textAsignatura"></p>\n\n   \n  <h3>Nivel de la relación:</h3>\n  <p id="nivelRelacion"></p>\n    <h3>Tags en común:</h3>\n  <p id="tagsComun"></p>\n</div>\n<div class="columna">\n\n  <textarea id="descripciónValue"></textarea>\n</div>\n  </div>\n \n</div>\n\n            <table class = "relaciones-tabla" border="1">\n                <tr>\n                    <th>Asignatura Relacionada</th>\n                    <th>Curso</th>\n                    <th>Nivel de Relevancia</th>\n                    <th>Url </th>\n                </tr>\n               \n            </table>\n    \n            <div class="campo"  style="display: none;>\n                <label>Descripción: </label>\n                <input \n                    type="text"\n                    name="descripcion"\n                    placeholder="${e.descripcion?"Edita la Tarea":"Descripción del proyecto"}"\n                    id="descripcion"\n                    value="${e.descripcion?e.descripcion:""}" />\n            </div>\n          \n           \n            <div class="opciones">\n                <button type="button" class="cerrar-modal">Cancelar</button>\n            </div>\n        </form>\n        \n           `,console.log("despues de conducir sin parar"),setTimeout(()=>{document.querySelector(".formulario").classList.add("animar")},0),document.querySelector(".dashboard").appendChild(i);const s=document.querySelector("table");r.forEach(e=>{console.log("1");const t=document.createElement("tr"),a=document.createElement("td"),c=document.createElement("td"),l=document.createElement("td"),r=document.createElement("td");console.log("name",e),r.innerHTML=`\n                       \n                            \n                            <div>\n                              ${e.nombre}\n                        \n                            </div>\n                            `,console.log(a),console.log(c),console.log(l),console.log("SOLO por saber",n);const i=n.find(n=>n.id===e.group);relevancia="",o.numero>i.numero?relevancia="predecesora":o.numero<i.numero?relevancia="sucesora":relevancia="relación",a.textContent=e.nombre,c.textContent=i.numero+" "+i.descripcion,l.textContent=relevancia,t.appendChild(a),t.appendChild(c),t.appendChild(l),t.appendChild(r),console.log(s),s.appendChild(t)}),s.addEventListener("click",(function(n){const o=n.target.closest("tr");if(o){console.log("Fila clicada:",o);const n=o.querySelectorAll("td")[0].textContent,t=getIdAsignaturaPorNombre(n,l);document.getElementById("textAsignatura").textContent=n,obtenerinfo(e.id,t)}}));document.getElementById("contenido");i.addEventListener("click",(function(e){if(e.preventDefault(),e.target.classList.contains("cerrar-modal")){console.log("se esta cerraando");document.querySelector(".formulario").classList.add("cerrar"),setTimeout(()=>{i.remove()},150)}}))}function expandirCelda(e){e.nextElementSibling.style.display="block",e.style.display="none"}function contraerCelda(e){const n=e.parentElement;n.style.display="none",n.previousElementSibling.style.display="inline"}function getIdAsignaturaPorNombre(e,n){let o=null;return n.forEach(n=>{n.asignatura.nombre===e&&(o=n.asignatura.id)}),o}async function obtenerinfo(e,n){new FormData;try{const o=`http://localhost/UpTask_MVC/public/index.php/api/inforelaciones?id1=${e}&id2=${n}`,t=await fetch(o),a=await t.json();let c="";console.log(a," MENUDO DIA XD"),c="0"===a.respuesta.relacion[0].color?"Relevancia Ligera":"1"===a.respuesta.relacion[0].color?"Relevancia Moderada":"2"===a.respuesta.relacion[0].color?"Relevancia Fuerte":"Relevancia Desconocida",console.log(a.respuesta.tags),document.getElementById("nivelRelacion").textContent=c,document.getElementById("descripciónValue").textContent=a.respuesta.relacion[0].descripcion,console.log(a)}catch(e){console.error("Error en la solicitud:",e)}}
=======
function mostrarGrafico(e,n){const t=n.find(n=>n.id===e.group),a=(n.filter(e=>e.numero<t.numero),[]);for(const n of e.sourceLinks)a.push({id:n.target.id,asignatura:n.target,value:n.value});const o=[];for(const n of e.targetLinks)o.push({id:n.source.id,asignatura:n.source,value:n.value});const i=a.concat(o),r=(e.sourceLinks.concat(e.targetLinks),new Set(i.map(e=>e.asignatura))),c=document.createElement("div");c.classList.add("modalGrafo"),c.innerHTML=`\n        <form class="formulario nueva-tarea">\n            <h2>Relaciónes de <a href="${e.url}" target="_blank">${e.nombre}</a> Semestre: ${e.semestre} </h2>\n            \n            <div class="Info">\n                <div class="info-campo">\n                    <div class="columna">\n                        <h3>Asignatura relacionada:</h3>\n                        <p id="textAsignatura"></p>\n                        <h4>Nivel de la relación:</h4>\n                        <p id="nivelRelacion"></p>\n                        <h4>Tags en común:</h4>\n                        <p id="tagsComun"></p>\n                        \n                    </div>\n                    <div class="columna">\n                        <textarea id="descripciónValue"></textarea>\n                    </div>\n                </div>\n            </div>\n            \n            <table class="relaciones-tabla" border="1">\n                <tr>\n                    <th>Asignatura Relacionada</th>\n                    <th>Curso</th>\n                    <th>Semestre</th>\n                    <th>Url</th>\n                </tr>\n            </table>\n            \n            <div class="campo" style="display: none;">\n                <label>Descripción: </label>\n                <input \n                    type="text"\n                    name="descripcion"\n                    placeholder="${e.descripcion?"Edita la Tarea":"Descripción del proyecto"}"\n                    id="descripcion"\n                    value="${e.descripcion?e.descripcion:""}" />\n            </div>\n            \n            <div class="opciones">\n                <button type="button" class="cerrar-modal">Cancelar</button>\n            </div>\n        </form>\n    `,setTimeout(()=>{document.querySelector(".formulario").classList.add("animar")},0),document.querySelector(".dashboard").appendChild(c);const s=document.querySelector("table");r.forEach(e=>{const t=document.createElement("tr"),a=document.createElement("td"),o=document.createElement("td"),i=document.createElement("td"),r=document.createElement("td"),c=n.find(n=>n.id===e.group);(e.semestre=1)?relevancia="Primer semestre":relevancia="Segundo semestre",a.textContent=e.nombre,o.textContent=c.numero+" "+c.descripcion,i.textContent=relevancia,r.innerHTML=`\n                       \n                            \n         <div>\n           ${e.url}\n     \n         </div>\n         `,t.appendChild(a),t.appendChild(o),t.appendChild(i),t.appendChild(r),s.appendChild(t)}),s.addEventListener("click",(function(n){const t=n.target.closest("tr");if(t){const n=t.querySelectorAll("td")[0].textContent,a=getasignaturaTargetPorNombre(n,i);document.getElementById("textAsignatura").textContent=n,console.log("tagsEnComun"),tagsEnComun=obtenerTagsEnComun(e,a),console.log(tagsEnComun),escribirTagsEnComun(tagsEnComun),obtenerinfo(e.id,a.id)}}));document.getElementById("contenido");c.addEventListener("click",(function(e){if(e.preventDefault(),e.target.classList.contains("cerrar-modal")){document.querySelector(".formulario").classList.add("cerrar"),setTimeout(()=>{c.remove()},150)}}))}function escribirTagsEnComun(e){const n=document.getElementById("tagsComun");n.textContent="",0===e.length?n.textContent="No hay tags en común.":n.textContent="Tags en común: "+e.join(", ")}function obtenerTagsEnComun(e,n){const t=Array.isArray(e.tags)?e.tags.map(e=>e.descripcion):[],a=[];return(Array.isArray(n.tags)?n.tags:[]).forEach(e=>{t.includes(e.descripcion)&&!a.includes(e.descripcion)&&a.push(e.descripcion)}),a}function expandirCelda(e){e.nextElementSibling.style.display="block",e.style.display="none"}function contraerCelda(e){const n=e.parentElement;n.style.display="none",n.previousElementSibling.style.display="inline"}function getasignaturaTargetPorNombre(e,n){let t=null;return n.forEach(n=>{n.asignatura.nombre===e&&(t=n.asignatura)}),t}async function obtenerinfo(e,n){new FormData;try{const t=`http://localhost/UpTask_MVC/public/index.php/api/inforelaciones?id1=${e}&id2=${n}`,a=await fetch(t),o=await a.json();let i="";i="0"===o.respuesta.relacion[0].color?"Relevancia Ligera":"1"===o.respuesta.relacion[0].color?"Relevancia Moderada":"2"===o.respuesta.relacion[0].color?"Relevancia Fuerte":"Relevancia Desconocida",document.getElementById("nivelRelacion").textContent=i,document.getElementById("descripciónValue").textContent=o.respuesta.relacion[0].descripcion;const r=document.getElementById("textAsignatura"),c=r.textContent,s=document.createElement("a");s.href=o.respuesta.asignatura.url,s.target="_blank",s.textContent=c,r.textContent="",r.appendChild(s)}catch(e){console.error("Error en la solicitud:",e)}}function mostrarRelacion(e){const n=document.createElement("div");if(n.classList.add("modalGrafo"),e.source&&e.target){var t=e.source.nombre,a=e.target.nombre,o={0:"1",1:"2",2:"3"}[e.color],i=e.value;n.innerHTML=`\n      <form class="formulario nueva-tarea" style="overflow: auto;">\n          <div class="centrado">\n              <legend class="centered-text">Relación de Asignaturas</legend>\n              <h2 class="centered-text">${t} y ${a}</h2>\n  \n              <div class="campo">\n                  <label>Tipo de Relevancia:</label>\n                  <select name="tipo_relevancia" id="tipoRelevancia" disabled>\n                      <option value="3">Relevancia Fuerte</option>\n                      <option value="2">Relevancia Moderada</option>\n                      <option value="1">Relevancia Ligera</option>\n                  </select>\n              </div>\n  \n              <div class="campo">\n                  <label>Descripción de la Relación:</label>\n                  <textarea name="descripcion_relacion" id="descripcionRelacion" rows="4" readonly></textarea>\n              </div>\n  \n              <div class="campo" style="display: none;">\n                \n                  <input type="text" id="tags" name="tags" disabled>\n              </div>\n  \n              <div class="campo">\n                  <ul class="listado-asignaturas" id="listado-temas"></ul>\n                  <input type="hidden" class="formulario__listado" id="formulario__listado" name="lista_cursos" />\n              </div>\n  \n              <div class="opciones">\n                  <button type="button" class="cerrar-modal">Salir</button>\n              </div>\n          </div>\n      </form>\n      `,setTimeout(()=>{document.querySelector(".formulario").classList.add("animar")},0),document.querySelector(".dashboard").appendChild(n),document.getElementById("tipoRelevancia").value=o,document.getElementById("descripcionRelacion").value=i,n.querySelectorAll("input, textarea, select, button").forEach((function(e){e.disabled=!0}));var r=n.querySelector(".cerrar-modal");r.disabled=!1,r.addEventListener("click",(function(){document.querySelector(".dashboard").removeChild(n)}))}}
>>>>>>> 25b85b50 (Inicial commit del proyecto UpTask_MVC)
