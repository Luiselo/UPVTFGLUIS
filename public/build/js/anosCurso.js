!function(){let e=[],t=[],n=[],o=[];!async function(){try{const t="http://localhost/UpTask_MVC/public/index.php/api/asignatura?id="+d(),n=await fetch(t),o=await n.json();console.log(o),e=o.asignaturas,s()}catch(e){console.log(e)}}();document.getElementById("agregar-tarea").addEventListener("click",(function(){i()})),console.log("pasa");document.getElementById("editar-Tag").addEventListener("click",(function(){console.log("Tags:",tags),function(e=!1,t){const n=document.createElement("DIV");n.classList.add("modal"),n.innerHTML='\n            <form class="formulario nueva-tarea">\n               \n                <legend> Agregar tag </legend>\n                \n                <div class="campo">\n                    <label>Agregar tags</label>\n                    <input type="text" id="nuevo-tag" placeholder="Escribe un tag y presiona Enter">\n                     </div>\n                    <ul class="listado-tags" id="listado-tags">\n                   \n                    </ul>\n                    <input type="hidden" class="formulario__listado" id="formulario__listado" name="lista_cursos">\n               \n                \n                <div class="opciones">\n                    <input \n                        type="submit" \n                        class="submit-nueva-tarea" \n                        value="Añadir Tags" \n                    />\n                    <button type="button" class="cerrar-modal">Cancelar</button>\n                </div>\n            </form>\n        ',e&&c(tarea);setTimeout(()=>{document.querySelector(".formulario").classList.add("animar")},0),n.addEventListener("click",(function(e){if(e.preventDefault(),e.target.classList.contains("cerrar-modal")){document.querySelector(".formulario").classList.add("cerrar"),setTimeout(()=>{n.remove()},500)}e.target.classList.contains("submit-nueva-tarea")&&(console.log("oleeeeeeeeee"),l(i))})),document.querySelector(".dashboard").appendChild(n);const o=document.getElementById("nuevo-tag"),a=document.getElementById("listado-tags"),s=document.getElementById("formulario__listado");console.log(t);let i=t.map(e=>e.descripcion);function r(){a.innerHTML="",i.forEach(e=>{const t=document.createElement("li");t.textContent=e;const n=document.createElement("button");n.textContent="X",n.type="button",t.appendChild(n),a.appendChild(t)}),s.value=i.join(",")}r(),o.addEventListener("keypress",e=>{if("Enter"===e.key){e.preventDefault();const t=o.value.trim();t&&!i.includes(t)?(i.push(t),r(),o.value=""):function(e,t,n){console.log("entra");const o=document.createElement("div");o.classList.add("alerta",t),o.textContent=e,n.parentElement.insertBefore(o,n.nextElementSibling),setTimeout(()=>{o.remove()},3e3)}("El tag ya existe o está vacío","error",o)}}),a.addEventListener("click",e=>{if("BUTTON"===e.target.tagName){const t=e.target.parentElement.textContent.slice(0,-1).trim();console.log(t),i=i.filter(e=>e!=t),console.log(i),r()}})}(!1,tags)})),console.log("pasa2");function a(n){const o=n.target.value;t=""!==o?e.filter(e=>e.estado===o):[],s()}function s(){!function(){const e=document.querySelector("#listado-asignaturas");for(;e.firstChild;)e.removeChild(e.firstChild)}();const o=t.length?t:e;if(0===o.length){const e=document.querySelector("#listado-asignaturas"),t=document.createElement("LI");return t.textContent="No Hay Asignaturas",t.classList.add("no-tareas"),console.log("pasa"),e.appendChild(t),void console.log("no pasa")}console.log(o),o.forEach(e=>{const t=document.createElement("LI");t.dataset.tareaId=e.id,t.classList.add("tarea");const o=document.createElement("P");o.textContent=e.asignatura,o.ondblclick=function(){i(editar=!0,{...e})};const a=document.createElement("DIV");a.classList.add("opciones");const c=document.createElement("BUTTON");c.classList.add("estado-tarea"),c.classList.add("pendiente"),c.textContent="Modificar relaciones",c.ondblclick=function(){!function(e){window.location.replace("http://localhost/UpTask_MVC/public/index.php/api/relaciones?id="+e.id)}({...e})};const r=document.createElement("BUTTON");r.classList.add("eliminar-tarea"),r.dataset.idTarea=e.id,r.textContent="Eliminar",r.ondblclick=function(){!function(e){Swal.fire({title:"¿Eliminar Tarea?",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&async function(e){const{estado:t,id:o,nombre:a}=e,i=new FormData;i.append("id",o),i.append("nombre",a),i.append("estado",t),i.append("proyectoId",d());try{const t="http://localhost:3000/api/tarea/eliminar",o=await fetch(t,{method:"POST",body:i}),a=await o.json();if(a.tipo="exito"){if("exito"===a.tipo){Swal.fire(a.mensaje,a.mensaje,"success");const e=document.querySelector(".modal");e&&e.remove()}Swal.fire("Eliminado!",a.mensaje,"success"),n=n.filter(t=>t.id!==e.id),s()}}catch(e){}}(e)})}({...e})},a.appendChild(c),a.appendChild(r),t.appendChild(o),t.appendChild(a);document.querySelector("#listado-asignaturas").appendChild(t)})}function i(e=!1,t={}){const a=document.createElement("DIV");a.classList.add("modal"),a.innerHTML='\n            <form class="formulario nueva-tarea">\n            <legend>Agregar nuevo Año</legend>\n              \n                <div class="campo">\n                <label for="curso">Seleccionar año</label>\n                <select  name ="anoCurso" id = "curso">\n                        <option>1</option>\n                        <option>2</option>\n                        <option>3</option>\n                        <option>4</option>\n                        <option>5</option>\n                        <option>6</option>\n                </select>\n            </div>\n                <div class="campo">\n                <label>Especialidad</label>\n                <input\n                type="text"\n                name="especialidad"\n                id="descripcion"\n                value="Obligatorio"\n        />\n                </div>\n                <div class="campo">\n                <ul class="listado-asignaturas" id="listado-temas">\n                </ul>\n                <input type="hidden" class="formulario__listado" id="formulario__listado" name="lista_cursos"  />     \n            </div>\n            <div class="opciones">\n            <input \n                type="submit" \n                class="submit-nueva-tarea" \n                value="Crear Curso" \n            />\n            <button type="button" class="cerrar-modal">Cancelar</button>\n        </div>\n            </form>\n        ',e&&c(t.id),setTimeout(()=>{document.querySelector(".formulario").classList.add("animar")},0),a.addEventListener("click",(function(i){if(i.preventDefault(),i.target.classList.contains("cerrar-modal")){document.querySelector(".formulario").classList.add("cerrar"),setTimeout(()=>{a.remove()},500)}if(i.target.classList.contains("submit-nueva-tarea")){const a=document.getElementById("curso").value.trim(),i=document.getElementById("descripcion").value.trim();if(""===i)return void r("La descripción de la tarea es Obligatorio","error",document.querySelector(".formulario legend"));e?(t.asignatura=nombreTarea,t.semestre=semestreTarea,t.descripcion=i,async function(e){const{id:t,asignatura:a,descripcion:i,cursoID:c,semestre:r}=e,l=new FormData;l.append("asignatura",a),l.append("semestre",i),l.append("descripcion",r),l.append("cursos",o),l.append("cursoID",d()),l.append("id",t);try{const e="http://localhost/UpTask_MVC/public/index.php/api/asignatura/actualizar",o=await fetch(e,{method:"POST",body:l}),a=await o.json();if(console.log(a),"exito"===a.tipo){Swal.fire(a.mensaje,a.mensaje,"success");const e=document.querySelector(".modal");e&&e.remove(),n=n.map(e=>(e.id===t&&(e.estado=estado,e.nombre=nombre),e)),s()}}catch(e){console.log(e)}}(t)):async function(e,t){const n=new FormData;n.append("numero",e),n.append("semestre",e),n.append("descripcion",t),n.append("idCurso",d()),console.log(e,t);try{const e="http://localhost/UpTask_MVC/public/index.php/api/anocurso",t=await fetch(e,{method:"POST",body:n}),o=await t.json();if(r(o.mensaje,o.tipo,document.querySelector(".formulario legend")),"exito"===o.tipo){Swal.fire(o.mensaje,o.mensaje,"success");const e=document.querySelector(".modal");e&&e.remove()}}catch(e){console.log(e)}}(a,i)}})),document.querySelector(".dashboard").appendChild(a);document.getElementById("contenido").addEventListener("keypress",guardarTag)}async function c(e){try{const t="http://localhost/UpTask_MVC/public/index.php/api/temarios?id="+e,n=await fetch(t),a=await n.json();a.temarios.forEach(e=>{o=[...o,e.descripcion]}),mostrarTags()}catch(e){console.log(e)}}function r(e,t,n){const o=document.querySelector(".alerta");o&&o.remove();const a=document.createElement("DIV");a.classList.add("alerta",t),a.textContent=e,n.parentElement.insertBefore(a,n.nextElementSibling),setTimeout(()=>{a.remove()},5e3)}async function l(e){const t=new FormData;t.append("tags",e),t.append("idCurso",d());try{const e="http://localhost/UpTask_MVC/public/index.php/api/anadirTags";console.log("heyyy");const n=await fetch(e,{method:"POST",body:t});console.log("heyyy");const o=await n.json();console.log("heyyy"),console.log("prueba");const a=document.querySelector(".formulario legend");if(console.log(a),r(o.mensaje,o.tipo,document.querySelector(".formulario legend")),console.log("heyyy"),console.log(o),"exito"===o.tipo){Swal.fire(o.mensaje,o.mensaje,"success");const e=document.querySelector(".modal");e&&e.remove()}}catch(e){console.log(e)}}function d(){const e=new URLSearchParams(window.location.search);return Object.fromEntries(e.entries()).id}document.querySelectorAll('#filtros input[type="radio').forEach(e=>{e.addEventListener("input",a)})}();